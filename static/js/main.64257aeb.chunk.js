(this["webpackJsonpreact-games"]=this["webpackJsonpreact-games"]||[]).push([[0],{15:function(e,t,a){},16:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(8),s=a.n(i),o=(a(14),a(15),a(16),a(6)),l=a(1),u=a(2),c=a(4),h=a(3),v=a(5),d=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.marker,t="btn square ";return"*"===e?t+="bomb":/([0-9]|-)/.test(e)&&(t+="clicked"),n.a.createElement("button",{className:t,onClick:this.props.onClick},e)}}]),t}(n.a.Component),f=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(u.a)(t,[{key:"renderSquare",value:function(e,t){var a=this,r=this.props.visibleBoard[e][t];return n.a.createElement(d,{key:t,marker:r,onClick:function(r){a.props.onClick(r,e,t)}})}},{key:"render",value:function(){var e=this;return this.props.visibleBoard.map((function(t,a){return n.a.createElement("div",{key:a,className:"board-row"},t.map((function(t,r){return e.renderSquare(a,r)})))}))}}]),t}(n.a.Component),m=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(u.a)(t,[{key:"renderDifficultyButton",value:function(e){return n.a.createElement("div",{className:"form-check"},n.a.createElement("label",{className:"form-check-label"},n.a.createElement("input",{className:"form-check-input",type:"radio",value:e,checked:this.props.difficulty===e,onChange:this.props.onChangeDifficulty}),e))}},{key:"render",value:function(){return n.a.createElement("div",null,this.renderDifficultyButton("easy"),this.renderDifficultyButton("medium"),this.renderDifficultyButton("hard"))}}]),t}(n.a.Component),b=(n.a.Component,function(e){function t(e){var a;Object(l.a)(this,t);var r=(a=Object(c.a)(this,Object(h.a)(t).call(this,e))).newGameState();return a.state=r,a}return Object(v.a)(t,e),Object(u.a)(t,[{key:"newGameState",value:function(){var e,t,a,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"easy";"easy"===r?(e=t=10,a=.2):"medium"===r?(e=t=15,a=.25):"hard"===r&&(e=t=20,a=.4);for(var n=[],i=0;i<e;i++){for(var s=[],o=0;o<t;o++){var l=a>Math.random(),u=l?"*":" ";s.push(u)}n.push(s)}var c=Array(e).fill(null).map((function(){return Array(t).fill(null)}));return{board:n,visibleBoard:c,visibleBoardHistory:[],moveNumber:0,gameOver:!1,difficulty:r}}},{key:"surroundingSquares",value:function(e,t){for(var a=[],r=0,n=[-1,0,1];r<n.length;r++){var i=n[r];if(e+i>=0&&e+i<this.state.board.length)for(var s=0,o=[-1,0,1];s<o.length;s++){var l=o[s];t+l>=0&&t+l<this.state.board[0].length&&(0===i&&0===l||a.push([e+i,t+l]))}}return a}},{key:"surroundingBombsCount",value:function(e,t){var a=this.surroundingSquares(e,t),r=0,n=!0,i=!1,s=void 0;try{for(var l,u=a[Symbol.iterator]();!(n=(l=u.next()).done);n=!0){var c=l.value,h=Object(o.a)(c,2),v=h[0],d=h[1];"*"===this.state.board[v][d]&&(r+=1)}}catch(f){i=!0,s=f}finally{try{n||null==u.return||u.return()}finally{if(i)throw s}}return r}},{key:"boardFull",value:function(){var e=!0,t=!1,a=void 0;try{for(var r,n=this.state.visibleBoard[Symbol.iterator]();!(e=(r=n.next()).done);e=!0){var i=r.value,s=!0,o=!1,l=void 0;try{for(var u,c=i[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){if(!u.value)return!1}}catch(h){o=!0,l=h}finally{try{s||null==c.return||c.return()}finally{if(o)throw l}}}}catch(h){t=!0,a=h}finally{try{e||null==n.return||n.return()}finally{if(t)throw a}}return!0}},{key:"playerWon",value:function(e){for(var t in this.state.board)for(var a in this.state.board[t]){var r=this.state.board[t][a],n=e[t][a];if("*"!==r&&!/[0-9]/.test(n))return!1}return!0}},{key:"handleBombGuess",value:function(e,t){var a=[];for(var r in this.state.visibleBoard)a.push(this.state.visibleBoard[r].slice());a[e][t]=a[e][t]?null:"-",this.setState({visibleBoard:a})}},{key:"markSurroundingBombCount",value:function(e,t,a){var r=this.surroundingBombsCount(t,a);if(e[t][a]=r,0===r){var n=this.surroundingSquares(t,a),i=!0,s=!1,l=void 0;try{for(var u,c=n[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var h=u.value,v=Object(o.a)(h,2),d=v[0],f=v[1];null===e[d][f]&&(e=this.markSurroundingBombCount(e,d,f))}}catch(m){s=!0,l=m}finally{try{i||null==c.return||c.return()}finally{if(s)throw l}}}return e}},{key:"handleSafeGuess",value:function(e,t){if("*"===this.state.board[e][t]){var a=[];for(var r in this.state.visibleBoard)a.push(this.state.visibleBoard[r].slice());for(var n in a)for(var i in a[n])"*"===this.state.board[n][i]&&(a[n][i]="*");this.setState({gameOver:!0,visibleBoard:a})}else{for(var s=[],o=0;o<this.state.visibleBoard.length;o++)s.push(this.state.visibleBoard[o].slice());s=this.markSurroundingBombCount(s,e,t),this.setState({visibleBoard:s}),(this.boardFull()||this.playerWon(s))&&this.setState({gameOver:!0})}}},{key:"handleClick",value:function(e,t,a){var r=this.state.visibleBoard[t][a];if(!(this.state.gameOver||r&&"-"!==r)){e.shiftKey?this.handleBombGuess(t,a):this.handleSafeGuess(t,a);var n=this.state.visibleBoardHistory.slice();n.push(this.state.visibleBoard),this.setState({visibleBoardHistory:n})}}},{key:"resetGame",value:function(){var e=this.newGameState(this.state.difficulty);this.setState(e)}},{key:"undoMove",value:function(){if(this.state.visibleBoardHistory.length){var e=this.state.visibleBoardHistory.length,t=this.state.visibleBoardHistory[e-1],a=this.state.visibleBoardHistory.slice(0,e-1);this.setState({visibleBoardHistory:a,visibleBoard:t,gameOver:!1})}}},{key:"handleChangeDifficulty",value:function(e){var t=this.newGameState(e.target.value);this.setState(t)}},{key:"render",value:function(){var e,t=this,a=this.state.visibleBoard;return e=this.state.gameOver?this.playerWon(a)?"Congrats! You won!":"Sorry! Try again!":"Click on the safe tiles. Shift + Click to mark as a bomb",n.a.createElement("div",{className:"container top-margin"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-auto game-board"},n.a.createElement(f,{visibleBoard:a,onClick:function(e,a,r){return t.handleClick(e,a,r)}})),n.a.createElement("div",{className:"col-md-auto"},n.a.createElement("div",{className:"row"},n.a.createElement("div",null,n.a.createElement("p",null,e))),n.a.createElement("div",{className:"row"},n.a.createElement(m,{difficulty:this.state.difficulty,onChangeDifficulty:function(e){return t.handleChangeDifficulty(e)}})),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"btn-group"},n.a.createElement("button",{onClick:function(){return t.undoMove()},className:"btn btn-primary"},"Back"),n.a.createElement("button",{className:"btn btn-primary",onClick:function(){return t.resetGame()}},"New Game"))))))}}]),t}(n.a.Component));var y=function(){return n.a.createElement(b,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},9:function(e,t,a){e.exports=a(17)}},[[9,1,2]]]);
//# sourceMappingURL=main.64257aeb.chunk.js.map